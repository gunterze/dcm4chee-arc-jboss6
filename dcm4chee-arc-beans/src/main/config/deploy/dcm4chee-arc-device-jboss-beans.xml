<?xml version="1.0" encoding="UTF-8"?>
<!-- ***** BEGIN LICENSE BLOCK *****
   - Version: MPL 1.1/GPL 2.0/LGPL 2.1
   -
   - The contents of this file are subject to the Mozilla Public License Version
   - 1.1 (the "License"); you may not use this file except in compliance with
   - the License. You may obtain a copy of the License at
   - http://www.mozilla.org/MPL/
   -
   - Software distributed under the License is distributed on an "AS IS" basis,
   - WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
   - for the specific language governing rights and limitations under the
   - License.
   -
   - The Original Code is part of dcm4che, an implementation of DICOM(TM) in
   - Java(TM), hosted at https://github.com/gunterze/dcm4che.
   -
   - The Initial Developer of the Original Code is
   - Agfa Healthcare.
   - Portions created by the Initial Developer are Copyright (C) 2011
   - the Initial Developer. All Rights Reserved.
   -
   - Contributor(s):
   - Gunter Zeilinger <gunterze@gmail.com>
   -
   - Alternatively, the contents of this file may be used under the terms of
   - either the GNU General Public License Version 2 or later (the "GPL"), or
   - the GNU Lesser General Public License Version 2.1 or later (the "LGPL"),
   - in which case the provisions of the GPL or the LGPL are applicable instead
   - of those above. If you wish to allow use of your version of this file only
   - under the terms of either the GPL or the LGPL, and not to allow others to
   - use your version of this file under the terms of the MPL, indicate your
   - decision by deleting the provisions above and replace them with the notice
   - and other provisions required by the GPL or the LGPL. If you do not delete
   - the provisions above, a recipient may use your version of this file under
   - the terms of any one of the MPL, the GPL or the LGPL.
   -
   - ***** END LICENSE BLOCK *****  -->

<deployment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:jboss:bean-deployer bean-deployer_2_0.xsd"
  xmlns="urn:jboss:bean-deployer:2.0">

  <bean name="Executer" class="java.util.concurrent.Executor">
    <constructor factoryClass="java.util.concurrent.Executors"
      factoryMethod="newCachedThreadPool" />
  </bean>

  <bean name="ScheduledExecutorService" class="java.util.concurrent.ScheduledExecutorService">
    <constructor factoryClass="java.util.concurrent.Executors"
      factoryMethod="newSingleThreadScheduledExecutor" />
  </bean>

  <bean name="SAXTranformerFactory" class="javax.xml.transform.sax.SAXTransformerFactory">
    <constructor factoryClass="javax.xml.transform.sax.SAXTransformerFactory"
        factoryMethod="newInstance" />
  </bean>

  <bean name="NullifyPN" class="javax.xml.transform.Templates">
    <constructor factoryMethod="newTemplates">
      <factory bean="SAXTranformerFactory"/>
      <parameter>
        <bean class="javax.xml.transform.stream.StreamSource">
          <constructor>
            <parameter class="java.lang.String">resource:dcm4chee-arc-nullify-pn.xsl</parameter>
          </constructor>
        </bean>
      </parameter>
    </constructor>
  </bean>

  <bean name="EnsurePID" class="javax.xml.transform.Templates">
    <constructor factoryMethod="newTemplates">
      <factory bean="SAXTranformerFactory"/>
      <parameter>
        <bean class="javax.xml.transform.stream.StreamSource">
          <constructor>
            <parameter class="java.lang.String">resource:dcm4chee-arc-ensure-pid.xsl</parameter>
          </constructor>
        </bean>
      </parameter>
    </constructor>
  </bean>

  <!-- Store Param -->
  <bean name="StoreParam" class="org.dcm4chee.archive.persistence.StoreParam">
    <property name="patientAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>1048592</value> <!-- Patient's Name (0010,0010) -->
         <value>1048608</value> <!-- Patient's ID (0010,0020) -->
         <value>1048609</value> <!-- Issuer of Patient ID (0010,0021) -->
         <value>1048612</value> <!-- Issuer of Patient ID Qualifiers Sequence (0010,0024) -->
         <value>1048624</value> <!-- Patient's Birth Date (0010,0030) -->
         <value>1048626</value> <!-- Patient's Birth Time (0010,0032) -->
         <value>1048640</value> <!-- Patient's Sex (0010,0040) -->
         <value>1048656</value> <!-- Patient's Insurance Plan Code Sequence (0010,0050) -->
         <value>1048833</value> <!-- Patient’s Primary Language Code Sequence (0010,0101) -->
         <value>1052673</value> <!-- Other Patient Names (0010,1001) -->
         <value>1052674</value> <!-- Other Patient IDs Sequence (0010,1002) -->
         <value>1052677</value> <!-- Patient's Birth Name (0010,1005) -->
         <value>1052688</value> <!-- Patient's Age (0010,1010) -->
         <value>1052704</value> <!-- Patient's Size (0010,1020) -->
         <value>1052705</value> <!-- Patient's Size Code Sequence (0010,1021) -->
         <value>1052720</value> <!-- Patient's Weight (0010,1030) -->
         <value>1052736</value> <!-- Patient’s Address (0010,1040) -->
         <value>1052768</value> <!-- Patient's Mother's Birth Name (0010,1060) -->
         <value>1052800</value> <!-- Military Rank (0010,1080) -->
         <value>1052801</value> <!-- Branch of Service (0010,1081) -->
         <value>1052816</value> <!-- Medical Record Locator (0010,1090) -->
         <value>1056768</value> <!-- Medical Alerts (0010,2000) -->
         <value>1057040</value> <!-- Allergies (0010,2110) -->
         <value>1057104</value> <!-- Country of Residence (0010,2150) -->
         <value>1057106</value> <!-- Region of Residence (0010,2152) -->
         <value>1057108</value> <!-- Patient’s Telephone Numbers (0010,2154) -->
         <value>1057120</value> <!-- Ethnic Group (0010,2160) -->
         <value>1057152</value> <!-- Occupation (0010,2180) -->
         <value>1057184</value> <!-- Smoking Status (0010,21A0) -->
         <value>1057200</value> <!-- Additional Patient History (0010,21B0) -->
         <value>1057216</value> <!-- Pregnancy Status (0010,21C0) -->
         <value>1057232</value> <!-- Last Menstrual Date (0010,21D0) -->
         <value>1057264</value> <!-- Patient's Religious Preference (0010,21F0) -->
         <value>1057281</value> <!-- Patient Species Description (0010,2201) -->
         <value>1057282</value> <!-- Patient Species Code Sequence (0010,2202) -->
         <value>1057283</value> <!-- Patient’s Sex Neutered (0010,2203) -->
         <value>1057426</value> <!-- Patient Breed Description (0010,2292) -->
         <value>1057427</value> <!-- Patient Breed Code Sequence (0010,2293) -->
         <value>1057428</value> <!-- Breed Registration Sequence (0010,2294) -->
         <value>1057431</value> <!-- Responsible Person (0010,2297) -->
         <value>1057432</value> <!-- Responsible Person Role (0010,2298) -->
         <value>1057433</value> <!-- Responsible Organization (0010,2299) -->
         <value>1064960</value> <!-- Patient's Comments (0010,4000) -->
         <value>1179664</value> <!-- Clinical Trial Sponsor Name (0012,0010) -->
         <value>1179680</value> <!-- Clinical Trial Protocol ID (0012,0020) -->
         <value>1179681</value> <!-- Clinical Trial Protocol Name (0012,0021) -->
         <value>1179696</value> <!-- Clinical Trial Site ID (0012,0030) -->
         <value>1179697</value> <!-- Clinical Trial Site Name (0012,0031) -->
         <value>1179712</value> <!-- Clinical Trial Subject ID (0012,0040) -->
         <value>1179714</value> <!-- Clinical Trial Subject Reading ID (0012,0042) -->
         <value>1179746</value> <!-- Patient Identity Removed (0012,0062) -->
         <value>1179747</value> <!-- De-identification Method (0012,0063) -->
         <value>1179748</value> <!-- De-identification Method Code Sequence (0012,0064) -->
         <value>1179777</value> <!-- Clinical Trial Protocol Ethics Committee Name (0012,0081) -->
         <value>1179778</value> <!-- Clinical Trial Protocol Ethics Committee Approval Number (0012,0082) -->
         <value>3670096</value> <!-- Special Needs (0038,0050) -->
         <value>3670272</value> <!-- Pertinent Documents Sequence (0038,0100) -->
         <value>3671296</value> <!-- Patient State (0038,0500) -->
         <value>3671298</value> <!-- Patient Clinical Trial Participation Sequence (0038,0502) -->
         <value>4206593</value> <!-- Confidentiality Constraint on Patient Data Description (0040,3001) -->
      </array>
    </property>
    <property name="studyAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524320</value> <!-- Study Date (0008,0020) -->
         <value>524336</value> <!-- Study Time (0008,0030) -->
         <value>524368</value> <!-- Accession Number (0008,0050) -->
         <value>524369</value> <!-- Issuer of Accession Number Sequence (0008,0051) -->
         <value>524432</value> <!-- Referring Physician's Name (0008,0090) -->
         <value>528432</value> <!-- Study Description (0008,1030) -->
         <value>528434</value> <!-- Procedure Code Sequence (0008,1032) -->
         <value>1052688</value> <!-- Patient's Age (0010,1010) -->
         <value>1052704</value> <!-- Patient's Size (0010,1020) -->
         <value>1052705</value> <!-- Patient's Size Code Sequence (0010,1021) -->
         <value>1052720</value> <!-- Patient's Weight (0010,1030) -->
         <value>1057152</value> <!-- Occupation (0010,2180) -->
         <value>1057200</value> <!-- Additional Patient History (0010,21B0) -->
         <value>1057283</value> <!-- Patient’s Sex Neutered (0010,2203) -->
         <value>2097165</value> <!-- Study Instance UID (0020,000D) -->
         <value>2097168</value> <!-- Study ID (0020,0010) -->
      </array>
    </property>
    <property name="seriesAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524384</value> <!-- Modality (0008,0060) -->
         <value>524400</value> <!-- Manufacturer (0008,0070) -->
         <value>524416</value> <!-- Institution Name (0008,0080) -->
         <value>524418</value> <!-- Institution Code Sequence (0008,0082) -->
         <value>528400</value> <!-- Station Name (0008,1010) -->
         <value>528446</value> <!-- Series Description (0008,103E) -->
         <value>528448</value> <!-- Institutional Department Name (0008,1040) -->
         <value>528464</value> <!-- Performing Physician's Name (0008,1050) -->
         <value>528528</value> <!-- Manufacturer Model Name (0008,1090) -->
         <value>528657</value> <!-- Referenced Performed Procedure Step Sequence (0008,1111) -->
         <value>1572885</value> <!-- Body Part Examined (0018,0015) -->
         <value>2097166</value> <!-- Series Instance UID (0020,000E) -->
         <value>2097169</value> <!-- Series Number (0020,0011) -->
         <value>2097248</value> <!-- Laterality (0020,0060) -->
         <value>4194884</value> <!-- Performed Procedure Step Start Date (0040,0244) -->
         <value>4194885</value> <!-- Performed Procedure Step Start Time (0040,0245) -->
         <value>4194933</value> <!-- RequestAttributesSequence (0040,0275) -->
      </array>
    </property>
    <property name="instanceAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524296</value> <!-- Image Type (0008,0008) -->
         <value>524310</value> <!-- SOP Class UID (0008,0016) -->
         <value>524312</value> <!-- SOP Instance UID (0008,0018) -->
         <value>524323</value> <!-- Content Date (0008,0023) -->
         <value>524339</value> <!-- Content Time (0008,0033) -->
         <value>528661</value> <!-- Referenced Series Sequence (0008,1115) -->
         <value>2097171</value> <!-- Instance Number (0020,0013) -->
         <value>2621448</value> <!-- Number of Frames (0028,0008) -->
         <value>2621456</value> <!-- Rows (0028,0010) -->
         <value>2621457</value> <!-- Columns (0028,0011) -->
         <value>2621696</value> <!-- Bits Allocated (0028,0100) -->
         <value>4235331</value> <!-- Concept Name Code Sequence (0040,A043) -->
         <value>4235379</value> <!-- Verifying Observer Sequence (0040,A073) -->
         <value>4236144</value> <!-- Referenced Request Sequence (0040,A370) -->
         <value>4236433</value> <!-- Completion Flag (0040,A491) -->
         <value>4236435</value> <!-- Verification Flag (0040,A493) -->
         <value>4325392</value> <!-- Document Title (0042,0010) -->
         <value>4325394</value> <!-- MIMETypeOfEncapsulatedDocument (0042,0012) -->
         <value>7340160</value> <!-- Content Label (0070,0080) -->
         <value>7340161</value> <!-- Content Description (0070,0081) -->
         <value>7340162</value> <!-- Presentation Creation Date (0070,0082) -->
         <value>7340163</value> <!-- Presentation Creation Time (0070,0083) -->
         <value>7340164</value> <!-- Content Creator's Name (0070,0084) -->
         <value>67110241</value> <!-- Original Attributes Sequence (0400,0561) -->
      </array>
    </property>
    <property name="visitAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524416</value> <!-- Institution Name (0008,0080) -->
         <value>524417</value> <!-- Institution Address (0008,0081) -->
         <value>524418</value> <!-- Institution Code Sequence (0008,0082) -->
         <value>524432</value> <!-- Referring Physician's Name (0008,0090) -->
         <value>524434</value> <!-- Referring Physician's Address (0008,0092) -->
         <value>524436</value> <!-- Referring Physician's TelephoneNumbers (0008,0094) -->
         <value>524438</value> <!-- Referring Physician IdentificationSequence (0008,0096) -->
         <value>528512</value> <!-- Admitting Diagnoses Description (0008,1080) -->
         <value>528516</value> <!-- Admitting Diagnoses Code Sequence (0008,1084) -->
         <value>3670024</value> <!-- Visit Status ID (0038,0008) -->
         <value>3670032</value> <!-- Admission ID (0038,0010) -->
         <value>3670036</value> <!-- Issuer of Admission ID Sequence (0038,0014) -->
         <value>3670038</value> <!-- Route of Admissions (0038,0016) -->
         <value>3670048</value> <!-- Admitting Date (0038,0020) -->
         <value>3670049</value> <!-- Admitting Time (0038,0021) -->
         <value>3670112</value> <!-- Service Episode ID (0038,0060) -->
         <value>3670114</value> <!-- Service Episode Description (0038,0062) -->
         <value>3670116</value> <!-- Issuer of Service Episode ID Sequence (0038,0064) -->
         <value>3670784</value> <!-- Current Patient Location (0038,0300) -->
         <value>3671040</value> <!-- Patient’s Institution Residence (0038,0400) -->
         <value>3686400</value> <!-- Visit Comments (0038,4000) -->
      </array>
    </property>
    <property name="serviceRequestAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524368</value> <!-- Accession Number (0008,0050) -->
         <value>524369</value> <!-- Issuer of Accession Number Sequence (0008,0051) -->
         <value>3280945</value> <!-- Requesting Physician Identification Sequence (0032,1031) -->
         <value>3280946</value> <!-- Requesting Physician (0032,1032) -->
         <value>3280947</value> <!-- Requesting Service (0032,1033) -->
         <value>3280948</value> <!-- Requesting Service Code Sequence (0032,1034) -->
         <value>4194342</value> <!-- Order Placer Identifier Sequence (0040,0026) -->
         <value>4194343</value> <!-- Filler Placer Identifier Sequence (0040,0027) -->
         <value>4202500</value> <!-- Issue Date of Imaging Service Request (0040,2004) -->
         <value>4202501</value> <!-- Issue Time of Imaging Service Request (0040,2005) -->
         <value>4202504</value> <!-- Order entered by (0040,2008) -->
         <value>4202505</value> <!-- Order Enterer’s Location (0040,2009) -->
         <value>4202512</value> <!-- Order Callback Phone Number (0040,2010) -->
         <value>4202518</value> <!-- Placer Order Number / Imaging Service Request (0040,2016) -->
         <value>4202519</value> <!-- File Order Number / Imaging Service Request (0040,2017) -->
         <value>4203520</value> <!-- Imaging Service Request Comments (0040,2400) -->
      </array>
    </property>
    <property name="requestedProcedureAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524320</value> <!-- Study Date (0008,0020) -->
         <value>524336</value> <!-- Study Time (0008,0030) -->
         <value>2097165</value> <!-- Study Instance UID (0020,000D) -->
         <value>3280992</value> <!-- Requested Procedure Description (0032,1060) -->
         <value>3280996</value> <!-- Requested Procedure Code Sequence (0032,1064) -->
         <value>4198401</value> <!-- Requested Procedure ID (0040,1001) -->
         <value>4198402</value> <!-- Reason for the Requested Procedure (0040,1002) -->
         <value>4198403</value> <!-- Requested Procedure Priority (0040,1003) -->
         <value>4198404</value> <!-- Patient Transport Arrangements (0040,1004) -->
         <value>4198405</value> <!-- Requested Procedure Location (0040,1005) -->
         <value>4198408</value> <!-- Confidentiality Code (0040,1008) -->
         <value>4198409</value> <!-- Reporting Priority (0040,1009) -->
         <value>4198410</value> <!-- Reason for Requested Procedure Code Sequence (0040,100A) -->
         <value>4198416</value> <!-- Names of Intended Recipients of Results (0040,1010) -->
         <value>4198417</value> <!-- Intended Recipients of Results Identification Sequence (0040,1011) -->
         <value>4199424</value> <!-- Requested Procedure Comments (0040,1400) -->
      </array>
    </property>
    <property name="scheduledProcedureStepAttributes">
      <array>
         <value>524293</value> <!-- Specific Character Set (0008,0005) -->
         <value>524384</value> <!-- Modality (0008,0060) -->
         <value>1057296</value> <!-- Anatomical Orientation Type (0010,2210) -->
         <value>3281008</value> <!-- Requested Contrast Agent (0032,1070) -->
         <value>4194305</value> <!-- Scheduled Station AE Title (0040,0001) -->
         <value>4194306</value> <!-- Scheduled Procedure Step Start Date (0040,0002) -->
         <value>4194307</value> <!-- Scheduled Procedure Step Start Time (0040,0003) -->
         <value>4194308</value> <!-- Scheduled Procedure Step End Date (0040,0004) -->
         <value>4194309</value> <!-- Scheduled Procedure Step End Time (0040,0005) -->
         <value>4194310</value> <!-- Scheduled Performing Physician's Name (0040,0006) -->
         <value>4194311</value> <!-- Scheduled Procedure Step Description (0040,0007) -->
         <value>4194312</value> <!-- Scheduled Protocol Code Sequence (0040,0008) -->
         <value>4194313</value> <!-- Scheduled Procedure Step ID (0040,0009) -->
         <value>4194315</value> <!-- Scheduled Performing Physician Identification Sequence (0040,000B) -->
         <value>4194320</value> <!-- Scheduled Station Name (0040,0010) -->
         <value>4194321</value> <!-- Scheduled Procedure Step Location (0040,0011) -->
         <value>4194322</value> <!-- Pre-Medication (0040,0012) -->
         <value>4194336</value> <!-- Scheduled Procedure Step Status (0040,0020) -->
         <value>4195328</value> <!-- Comments on the Scheduled Procedure Step (0040,0400) -->
         <value>4195584</value> <!-- Scheduled Specimen Sequence (0040,0500) -->
      </array>
    </property>
    <property name="fuzzyStr">
      <bean name="FuzzyStr" class="org.dcm4che.soundex.ESoundex" />
    </property>
    <property name="storeDuplicate">STORE</property>
    <property name="suppressWarningCoercionOfDataElements">false</property>
    <property name="storeOriginalAttributes">true</property>
    <property name="modifyingSystem">DCM4CHEE</property>
    <property name="retrieveAETs">
      <array>
        <value>DCM4CHEE</value>
      </array>
    </property>
    <property name="externalRetrieveAET"><null/></property>
    <property name="fileSystemGroupID">DEFAULT</property>
    <property name="digestAlgorithm">MD5</property>
    <property name="directoryPath">incoming</property>
    <!-- Uncomment to activate renaming of received objects after parsing -->
    <!--
    <property name="renameFilePathFormat">
      <bean class="org.dcm4che.util.AttributesFormat">
        <constructor>
          <parameter>date:yyyy/MM/dd(0008,0020)/date:HH(0008,0030)/#(0020,000D)/#(0020,000E)/#(0008,0018)</parameter>
        </constructor>
      </bean>
    </property>
    -->
    <property name="incomingAttributeCoercion">
      <map keyClass="java.lang.String" valueClass="javax.xml.transform.Templates">
        <entry>
          <key>ENSURE_PID</key>
          <value><inject bean="EnsurePID" /></value>
        </entry>
      </map>
    </property>
    <property name="outgoingAttributeCoercion">
      <map keyClass="java.lang.String" valueClass="javax.xml.transform.Templates">
        <entry>
          <key>WITHOUT_PN</key>
          <value><inject bean="NullifyPN" /></value>
        </entry>
      </map>
    </property>
  </bean>

 <!-- Query Retrieve Param -->
  <bean name="QueryRetrieveParam" class="org.dcm4chee.archive.beans.util.QueryRetrieveParam">
    <property name="matchUnknown">true</property>
    <property name="sendPendingCGet">true</property>
    <property name="sendPendingCMoveInterval">5000</property>
  </bean>

  <!-- The DICOM Device -->
  <bean name="Device" class="org.dcm4che.net.Device">
    <constructor>
      <parameter>dcm4chee-arc</parameter>
    </constructor>
    <property name="executor">
      <inject bean="Executer" />
    </property>
    <property name="scheduledExecutor">
      <inject bean="ScheduledExecutorService" />
    </property>
    <incallback method="addApplicationEntity" />
    <uncallback method="removeApplicationEntity" />
    <install method="setProperty">
      <parameter>StoreParam</parameter>
      <parameter><inject bean="StoreParam" /></parameter>
    </install>
    <install method="setProperty">
      <parameter>QueryRetrieveParam</parameter>
      <parameter><inject bean="QueryRetrieveParam" /></parameter>
    </install>
    <install method="setProperty">
      <parameter>Retrieve.connections</parameter>
      <parameter>
        <map keyClass="java.lang.String" valueClass="org.dcm4che.net.Connection">
          <entry>
            <key>STORESCP</key>
            <value>
              <bean class="org.dcm4che.net.Connection">
                <property name="hostname">localhost</property>
                <property name="port">11113</property>
              </bean>
            </value>
          </entry>
          <entry>
            <key>STORESCP_TLS</key>
            <value>
              <bean class="org.dcm4che.net.Connection">
                <property name="hostname">localhost</property>
                <property name="port">2762</property>
                <property name="tlsCipherSuites">
                  <array>
                    <value>SSL_RSA_WITH_NULL_SHA</value>
                    <value>TLS_RSA_WITH_AES_128_CBC_SHA</value>
                    <value>TLS_RSA_WITH_3DES_EDE_CBC_SHA</value>
                  </array>
                </property>
              </bean>
            </value>
          </entry>
        </map>
      </parameter>
    </install>
    <start method="activate" />
    <stop method="deactivate" />
    <demand>Class:org.dcm4chee.archive.ejb.store.InstanceStore</demand>
    <demand>Class:org.dcm4chee.archive.ejb.query.CompositeQuery</demand>
    <demand>Class:org.dcm4chee.archive.ejb.query.LocateInstances</demand>
  </bean>


  <!-- The DICOM Connection -->
  <bean name="Connection" class="org.dcm4che.net.Connection">
    <property name="port">11112</property>
    <install bean="Device" method="addConnection">
      <parameter><this/></parameter>
    </install>
    <install bean="ApplicationEntity" method="addConnection">
      <parameter><this/></parameter>
    </install>
    <uninstall bean="ApplicationEntity" method="removeConnection">
      <parameter><this/></parameter>
    </uninstall>
    <uninstall bean="Device" method="removeConnection">
      <parameter><this/></parameter>
    </uninstall>
  </bean>

  <!-- The DICOM Application Entity -->
  <bean name="ApplicationEntity" class="org.dcm4che.net.ApplicationEntity">
    <constructor>
      <parameter>DCM4CHEE</parameter>
    </constructor>
    <property name="associationAcceptor">true</property>
    <property name="maxOpsPerformed">0</property>
    <property name="maxOpsInvoked">0</property>
    <property name="dimseRQHandler">
      <inject bean="DicomServiceRegistry" />
    </property>
    <incallback method="addTransferCapability" />
  </bean>

  <!-- Service Registry -->
  <bean name="DicomServiceRegistry" class="org.dcm4che.net.service.DicomServiceRegistry">
    <incallback method="addDicomService" />
  </bean>

</deployment>
